# eureka_localization
eureka_localization - пакет предназначенный для предоставления локализации в систему ровера Lancer.

### Описание

Главная часть пакета состоит из launch-файла ```localization.launch.py``` и файлов конфигурации. Внутри launch-файла запускаются подсистемы и узлы обеспечивающий локализацию робота
на местности, среди них:

- ```static transform setup nodes``` - узлы, предоставляющий в дерево трансформаци неизменяющиеся трансформации, такие как base_footprint->base_link, base_link->camera_link и base_link->imu. 
Эти трансформации помогают геометрически упорядочить главные сенсорные подсистемы ровера относительно его геометрического центра.
- ```imu setup launch``` - launch-файл из пакета ```wt901_wit.launch.py```, предоставляющий в систему информацию с imu (инерциально-измерительного модуля) в систему.
- ```odometry setup node``` - узел из пакета ```eureka_odometry```, предоставляющий в систему информацию об одометрии.
- ```ekf setup node``` - основной узел, который производит комплексирование данных используя алгоритм рассширенного фильтра калмана и предоставляет в систему информацию о локализации.

### Конфигурируемые параметры

Во избежание перекомпиляции пакетов использующихся в данном в исходном коде каждого имеются конструкции позволяющие передавать различные параметры. Среди них:

Описание основных параметров узла eureka_odometry находится в соостветствующем пакете.
Описание основных параметров соответствующих узлов из launch-файла wt901_wit.launch.py находится в соответсвующем пакете.

Описание основных параметров узла комплексирования данных и предоставления информации о локализации в систему (ekf_filter_node):
- ```frequency: (double)``` - параметр, указывающий частоту работы алгоритма комплексирования данных.
- ```publish_tf: (bool)``` - параметр, указывающий необходимость публикации трансформации (odom->base_footprint) в дерево трансформации tf.
- ```map_frame: (string)``` - параметр, указывающий названия потомка в дереве трансформации tf, который узел ekf_filter_node будет использовать в качестве начала системы координат связанной с 
глобальной точкой отсчета пути.
- ```odom_frame: (string)``` - параметр, указывающий названия потомка в дереве трансформации tf, который узел ekf_filter_node будет использовать в качестве начала системы координат связанной с локальной
точкой отсчета пути.
- ```base_link_frame: (string)``` - параметр, указывающий названия потомка в дереве трансформации tf, который узел ekf_filter_node будет использовать в качестве начала системы координат связанной с 
корпусом ровера.
- ```world_frame: (string)``` - параметр, указывающий названия потомка в дереве трансформации tf, который узел ekf_filter_node будет использовать в качестве начала системы координат связанной с 
глобальной точкой отсчета пути.
- ```odom0: (string)``` - параметр, указывающий название топика на который необходимо подписаться узлу для считывания данных об одометрии ровера.
- ```odom0_config: (bool array)``` - параметр, являющийся булевой матрицей, каждый компонент которой соотносится с соответсвующим полем в сообщении одометрии ровера. Если в соотвествующем компоненте
матрицы значением является ```true```, то из соответствующей компоненте поля будут взяты данные, который в последующем буду участвовать в комплексировании.
- ```imu0: (string)``` - параметр, указывающий название топика на который необходимо подписаться узлу для считывания данных с imu (инерционно-измерительного модуля).
- ```imu0_config: (bool array)``` - параметр, являющийся булевой матрицей, каждый компонент которой соотносится с соответсвующим полем в сообщении с imu. Если в соотвествующем компоненте
матрицы значением является ```true```, то из соответствующей компоненте поля будут взяты данные, который в последующем буду участвовать в комплексировании.
- ```imu0_pose_rejection_threshold: (double)``` - параметр, указывающий пороговое значение для данных относящихся к позе в сообщении с imu. Абсолютные значения данных, пришедших с полей сообощения imu 
относящихся к позиции будут проигнорированны.
- ```imu0_twist_rejection_threshold: (double)``` - параметр, указывающий пороговое значение для данных относящихся к скорости в сообщении с imu. Абсолютное значение данных, пришедших с полей сообщения imu
относящихся к скорости будут проигнорированны.
- ```imu0_linear_acceleration_rejection_threshold: (double)``` - параметр, указывающий пороговое значение для данных относящихся к ускорению в сообщении с imu. Абсолютное значение данных, пришедших 
с полей сообщения imu относящихся к ускорению будут проигнорированны.
- ```imu0_remove_gravitational_acceleration: (bool)``` - параметр, указывающий необходимость компенсации алгоритмом гравитационного воздействия в imu.
- ```use_control: (bool)``` - параметр, добавляющий возможность включения в комплексирование дополнительного источника информации в виде модуля генерирующего рандомные воздействия 
на алгоритм комплексирования в некоторых границах.
- ```process_noise_covariance: (double array)``` - параметр, являющийся матрицей шума расширенного фильтра калмана. Определяет шум системы на каждом шаге комплексирования. Способна к эволюции.
- ```initial_estimate_covariance: (double array)``` - параметр, являющийся начальной матрицей шума расширенного фильтра калмана. Определяет состояние матрица шума система на первой иттерации алгоритма.

В скобках указаны типы значения которые принимают данные параметры.
